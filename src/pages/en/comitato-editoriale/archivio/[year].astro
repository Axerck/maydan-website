---
import Layout from '../../../../layouts/Layout.astro';
import { pastBoards } from '../../../../data/structure';
import { teamMembers } from '../../../../data/team';

export async function getStaticPaths() {
  return pastBoards.map((board) => ({
    params: { year: board.year },
    props: { board },
  }));
}

const { board } = Astro.props;

// Mapping for group titles (IT -> EN)
const groupTitleMap: Record<string, string> = {
  "Direttore responsabile": "Editor-in-Chief",
  "Direttrice responsabile": "Editor-in-Chief",
  "Vicedirettrice": "Deputy Editor",
  "Vicedirettore": "Deputy Editor",
  "Caporedattrice": "Managing Editor",
  "Caporedattore": "Managing Editor",
  "Redazione": "Editorial Board",
  "Tesoriere": "Treasurer",
  "Tirocinanti": "Interns",
  "Collaboratori": "Collaborators", 
  "Comitato Scientifico": "Scientific Committee"
};

function translateTitle(title: string) {
    return groupTitleMap[title] || title;
}
---

<Layout title={`Editorial Board ${board.year} - Rivista Maydan`}>
  <h1>Editorial Board {board.year}</h1>

  <div class="archive-nav">
      <a href="/en/comitato-editoriale">← Back to Current Editorial Board</a>
  </div>
  <br/>

  {board.groups.map((group) => (
    <section class="committee-section">
      <h2>{translateTitle(group.title)}</h2>
      <ul>
        {group.members.map((memberStruct) => {
          const memberData = teamMembers.find(m => m.slug === memberStruct.slug);
          if (!memberData) return null;

          return (
            <li>
              <strong>
                <a href={`/en/comitato-editoriale/${memberData.slug}`}>{memberData.name}</a>
              </strong>
              {memberData.affiliation && ` – `}
              {memberData.affiliation && <em>{memberData.affiliation}</em>}
            </li>
          );
        })}
      </ul>
      <hr />
    </section>
  ))}
</Layout>
